# Mewt Configuration File
# Documentation: https://github.com/trailofbits/mewt
#
# Corresponding CLI flags use dotted notation matching this structure:
#   db → --db
#   log.level → --log.level
#   log.color → --log.color
#   test.cmd → --test.cmd (run, test commands)
#   test.timeout → --test.timeout (run, test commands)
#
# Command-specific CLI flags:
#   mewt run [TARGET...] --ignore-targets=... --mutations=...
#   mewt mutate <TARGET...> --ignore-targets=...
#   mewt test --ids=... --test.cmd=... --test.timeout=...

# Database path (relative to this config file or absolute)
# CLI: --db PATH
db = "mewt.sqlite"

[log]
# Logging level: trace, debug, info, warn, error
# CLI: --log.level debug
level = "info"

# Force color output on/off, or omit for auto-detection based on terminal
# CLI: --log.color on|off
# color = true

[targets]
# Target discovery configuration (used by run and mutate commands)
# CLI overrides COMPLETELY REPLACE these config values (no merging)

# Include patterns: supports globs, files, and directories
# Examples: ["src/**/*.rs"], ["src", "tests"], ["lib/*.py"]
# CLI: mewt run <TARGET...> (replaces include if provided)
# include = ["src/**/*.rs", "tests/**/*.rs"]

# Ignore patterns: substring matching (simple and user-friendly)
# Any path containing these substrings will be excluded
# Examples: ["node_modules", "vendor", "target", ".cargo"]
# CLI: mewt run --ignore-targets=node_modules,vendor (replaces ignore if provided)
# ignore = ["target", "node_modules", "vendor"]

[run]
# Run command configuration

# Whitelist specific mutation types by slug (optional)
# Run `mewt print mutations` to see all available mutation types
# If omitted, all mutation types are enabled
# CLI: mewt run --mutations ER,CR,BR (replaces this if provided)
# mutations = ["ER", "CR", "BR", "AOD", "AOR"]

# Test all mutants comprehensively (default: false)
# comprehensive = false

[test]
# Default test command for all targets
# This command will be run to verify mutants are caught by your test suite
# CLI: --test.cmd "cargo test"
# cmd = "cargo test"

# Default timeout in seconds (optional)
# If omitted, defaults to 2x the baseline test runtime
# CLI: --test.timeout 30
# timeout = 30

# Per-target test rules (optional)
# Ordered array where first matching glob wins
# Each entry can override cmd and/or timeout for specific file patterns
# More specific patterns should come BEFORE general patterns
# Note: No CLI equivalent - use config file for complex per-target rules

# Example 1: Critical files get extra scrutiny with slower, thorough tests
# [[test.per_target]]
# glob = "src/auth/*.rs"
# cmd = "cargo test --release -- --test-threads=1"
# timeout = 120

# Example 2: Standard Rust files use default fast tests
# [[test.per_target]]
# glob = "*.rs"
# cmd = "cargo test"
# timeout = 60

# Example 3: Different language needs different test command
# [[test.per_target]]
# glob = "*.go"
# cmd = "go test ./..."
# timeout = 30
